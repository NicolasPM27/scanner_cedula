/*
 * App Global CSS
 * ----------------------------------------------------------------------------
 * Actualización de datos - Material Design 3 Global Styles by FOMAG
 * Estilos globales modernos con tokens de diseño MD3
 * ----------------------------------------------------------------------------
 */

/* Importar variables de tema primero */
@use "./theme/variables.scss" as *;

/* Core CSS required for Ionic components to work properly */
@import "@ionic/angular/css/core.css";

/* Basic CSS for apps built with Ionic */
@import "@ionic/angular/css/normalize.css";
@import "@ionic/angular/css/structure.css";
@import "@ionic/angular/css/typography.css";
@import "@ionic/angular/css/display.css";

/* Optional CSS utils that can be commented out */
@import "@ionic/angular/css/padding.css";
@import "@ionic/angular/css/float-elements.css";
@import "@ionic/angular/css/text-alignment.css";
@import "@ionic/angular/css/text-transformation.css";
@import "@ionic/angular/css/flex-utils.css";

/**
 * Ionic Dark Mode
 * -----------------------------------------------------
 * For more info, please see:
 * https://ionicframework.com/docs/theming/dark-mode
 */

/* @import "@ionic/angular/css/palettes/dark.always.css"; */
/* @import "@ionic/angular/css/palettes/dark.class.css"; */
@import '@ionic/angular/css/palettes/dark.system.css';

// =============================================================================
// MATERIAL DESIGN 3 - ESTILOS GLOBALES
// =============================================================================

// -----------------------------------------------------------------------------
// TIPOGRAFÍA GLOBAL
// -----------------------------------------------------------------------------
html {
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: var(--ion-font-family);
  line-height: 1.5;
  letter-spacing: 0.01em;
}

// Headings con tipografía de display
h1, h2, h3, h4, h5, h6,
ion-title,
.display-large,
.display-medium,
.display-small,
.headline-large,
.headline-medium,
.headline-small {
  font-family: var(--ion-heading-font-family);
  font-weight: 600;
  letter-spacing: -0.02em;
}

// Escala tipográfica MD3
.display-large {
  font-size: 3.5rem;
  line-height: 1.1;
  font-weight: 700;
}

.display-medium {
  font-size: 2.75rem;
  line-height: 1.15;
  font-weight: 700;
}

.display-small {
  font-size: 2.25rem;
  line-height: 1.2;
  font-weight: 600;
}

.headline-large {
  font-size: 2rem;
  line-height: 1.25;
}

.headline-medium {
  font-size: 1.75rem;
  line-height: 1.3;
}

.headline-small {
  font-size: 1.5rem;
  line-height: 1.35;
}

.title-large {
  font-size: 1.375rem;
  line-height: 1.4;
  font-weight: 500;
}

.title-medium {
  font-size: 1rem;
  line-height: 1.5;
  font-weight: 500;
  letter-spacing: 0.01em;
}

.title-small {
  font-size: 0.875rem;
  line-height: 1.45;
  font-weight: 500;
  letter-spacing: 0.005em;
}

.body-large {
  font-size: 1rem;
  line-height: 1.5;
}

.body-medium {
  font-size: 0.875rem;
  line-height: 1.45;
}

.body-small {
  font-size: 0.75rem;
  line-height: 1.4;
}

.label-large {
  font-size: 0.875rem;
  line-height: 1.45;
  font-weight: 500;
  letter-spacing: 0.02em;
}

.label-medium {
  font-size: 0.75rem;
  line-height: 1.4;
  font-weight: 500;
  letter-spacing: 0.03em;
}

.label-small {
  font-size: 0.6875rem;
  line-height: 1.35;
  font-weight: 500;
  letter-spacing: 0.03em;
}

// -----------------------------------------------------------------------------
// COMPONENTES IONIC - ESTILOS MD3
// -----------------------------------------------------------------------------

// Toolbar modernizado
ion-toolbar {
  --background: var(--ion-toolbar-background);
  --border-width: 0;
  --padding-top: var(--space-xs);
  --padding-bottom: var(--space-xs);
  --padding-start: var(--space-md);
  --padding-end: var(--space-md);
  
  ion-title {
    font-family: var(--ion-heading-font-family);
    font-size: 1.25rem;
    font-weight: 600;
    letter-spacing: -0.01em;
  }
}

// Header con sombra sutil
ion-header {
  &::after {
    background-image: none !important;
  }
  
  &:not(.header-collapse-condense-inactive) {
    box-shadow: var(--elevation-1);
  }
}

// Content con fondo de superficie
ion-content {
  --background: var(--ion-background-color);
  --padding-start: var(--space-md);
  --padding-end: var(--space-md);
  --padding-top: var(--space-md);
  --padding-bottom: var(--space-lg);
}

// Cards MD3 — Consistent Material 3 filled card pattern
ion-card {
  --background: var(--ion-card-background);
  border-radius: var(--radius-lg);
  box-shadow: var(--elevation-2);
  margin: var(--space-sm);
  overflow: hidden;
  border: 1px solid rgba(var(--ion-color-primary-rgb), 0.06);
  transition: box-shadow var(--transition-normal), transform var(--transition-normal);
  
  &:hover {
    box-shadow: var(--elevation-3);
  }
  
  ion-card-header {
    padding: var(--space-md) var(--space-md) var(--space-xs);
  }
  
  ion-card-title {
    font-family: var(--ion-heading-font-family);
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--ion-text-color);
  }
  
  ion-card-subtitle {
    font-size: 0.875rem;
    color: var(--ion-color-medium);
    margin-top: var(--space-xxs);
  }
  
  ion-card-content {
    padding: var(--space-sm) var(--space-md) var(--space-md);
    font-size: 0.9375rem;
    line-height: 1.5;
  }
}

// Buttons MD3 con elevación y estados
ion-button {
  --border-radius: var(--radius-full);
  --padding-start: var(--space-lg);
  --padding-end: var(--space-lg);
  --box-shadow: var(--elevation-1);
  font-family: var(--ion-font-family);
  font-weight: 500;
  font-size: 0.875rem;
  letter-spacing: 0.02em;
  text-transform: none;
  transition: all var(--transition-normal);
  
  &:hover {
    --box-shadow: var(--elevation-2);
    opacity: 0.92;
  }
  
  &:active {
    transform: scale(0.98);
  }
  
  // Filled button (default)
  &[fill="solid"] {
    --box-shadow: var(--elevation-2);
  }
  
  // Outlined button
  &[fill="outline"] {
    --border-width: 1.5px;
    --box-shadow: none;
  }
  
  // Tonal button (MD3 filled tonal)
  &.button-tonal {
    --background: rgba(var(--ion-color-primary-rgb), 0.12);
    --color: var(--ion-color-primary);
    --box-shadow: none;
  }
  
  // Elevated button
  &.button-elevated {
    --background: var(--surface-container-low);
    --color: var(--ion-color-primary);
    --box-shadow: var(--elevation-2);
  }
}

// FAB MD3
ion-fab-button {
  --background: var(--ion-color-primary);
  --box-shadow: var(--elevation-3);
  --border-radius: var(--radius-lg);
  transition: all var(--transition-normal);
  
  &:hover {
    --box-shadow: var(--elevation-4);
  }
  
  // FAB pequeño
  &[size="small"] {
    --border-radius: var(--radius-md);
  }
  
  // Extended FAB
  &.fab-extended {
    --border-radius: var(--radius-lg);
    width: auto;
    padding: 0 var(--space-md);
  }
}

// Items y listas MD3
ion-item {
  --background: var(--ion-item-background);
  --padding-start: var(--space-md);
  --padding-end: var(--space-md);
  --inner-padding-end: 0;
  --min-height: 56px;
  --border-color: transparent;
  --border-radius: var(--radius-md);
  margin-bottom: var(--space-xxs);
  
  &::part(native) {
    border-radius: var(--radius-md);
  }
  
  ion-label {
    margin: var(--space-sm) 0;
    
    h2, h3 {
      font-weight: 500;
      color: var(--ion-text-color);
    }
    
    p {
      color: var(--ion-color-medium);
      margin-top: var(--space-xxs);
    }
  }
  
  // Item con avatar
  ion-avatar {
    width: 40px;
    height: 40px;
    margin-right: var(--space-md);
  }
  
  // Item con icono leading
  ion-icon[slot="start"] {
    margin-right: var(--space-md);
    font-size: 1.5rem;
    color: var(--ion-color-medium);
  }
}

ion-list {
  background: transparent;
  padding: var(--space-xs) 0;
  
  // Lista con inset
  &.list-inset {
    margin: 0 var(--space-md);
    border-radius: var(--radius-lg);
    overflow: hidden;
    
    ion-item:first-child {
      border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    }
    
    ion-item:last-child {
      border-radius: 0 0 var(--radius-lg) var(--radius-lg);
      margin-bottom: 0;
    }
  }
}

// Inputs MD3
ion-input, ion-textarea {
  --background: var(--surface-container);
  --padding-start: var(--space-md);
  --padding-end: var(--space-md);
  --padding-top: var(--space-sm);
  --padding-bottom: var(--space-sm);
  --border-radius: var(--radius-md) var(--radius-md) 0 0;
  --highlight-color-focused: var(--ion-color-primary);
  font-size: 1rem;
  margin-bottom: var(--space-sm);
  
  &.has-focus {
    --background: var(--surface-container-high);
  }
}

// Chips MD3
ion-chip {
  --background: var(--surface-container-high);
  --color: var(--ion-text-color);
  border-radius: var(--radius-sm);
  font-size: 0.875rem;
  font-weight: 500;
  padding: var(--space-xs) var(--space-md);
  
  &[color="primary"] {
    --background: rgba(var(--ion-color-primary-rgb), 0.12);
    --color: var(--ion-color-primary);
  }
}

// Badges MD3
ion-badge {
  --padding-start: var(--space-sm);
  --padding-end: var(--space-sm);
  border-radius: var(--radius-full);
  font-size: 0.75rem;
  font-weight: 600;
  letter-spacing: 0.01em;
}

// Segmented buttons MD3
ion-segment {
  --background: var(--surface-container);
  border-radius: var(--radius-full);
  padding: var(--space-xxs);
  
  ion-segment-button {
    --background-checked: var(--surface-container-highest);
    --indicator-box-shadow: none;
    --border-radius: var(--radius-full);
    --padding-start: var(--space-md);
    --padding-end: var(--space-md);
    min-height: 40px;
    font-weight: 500;
    text-transform: none;
    
    &::part(indicator-background) {
      border-radius: var(--radius-full);
    }
  }
}

// Modales y sheets MD3
ion-modal {
  --border-radius: var(--radius-xl) var(--radius-xl) 0 0;
  --box-shadow: var(--elevation-4);
  
  &.modal-card {
    --border-radius: var(--radius-xl);
  }
  
  ion-toolbar:first-of-type {
    padding-top: var(--space-sm);
  }
}

// Action sheets MD3
ion-action-sheet {
  --background: var(--surface-container);
  --button-background: transparent;
  --button-background-activated: rgba(var(--ion-color-primary-rgb), 0.08);
  
  .action-sheet-group {
    border-radius: var(--radius-xl);
    margin: var(--space-sm);
  }
}

// Toast MD3
ion-toast {
  --background: var(--surface-container-highest);
  --color: var(--ion-text-color);
  --border-radius: var(--radius-md);
  --box-shadow: var(--elevation-3);
  font-weight: 500;
}

// Alerts MD3
ion-alert {
  --background: var(--surface-container-high);
  --border-radius: var(--radius-xl);
  
  .alert-title {
    font-family: var(--ion-heading-font-family);
    font-weight: 600;
    font-size: 1.25rem;
  }
  
  .alert-button {
    font-weight: 500;
    text-transform: none;
  }
}

// Loading y Spinners
ion-loading {
  --background: var(--surface-container-high);
  --spinner-color: var(--ion-color-primary);
  --border-radius: var(--radius-xl);
}

ion-spinner {
  --color: var(--ion-color-primary);
}

// Progress indicators
ion-progress-bar {
  --background: var(--surface-container-highest);
  --progress-background: var(--ion-color-primary);
  border-radius: var(--radius-full);
  height: 4px;
}

// Skeleton loaders
ion-skeleton-text {
  --background: var(--surface-container-high);
  --background-rgb: var(--ion-color-medium-rgb);
  border-radius: var(--radius-sm);
}

// Refresher
ion-refresher {
  ion-refresher-content {
    --pulling-icon: var(--ion-color-primary);
    --spinner-icon: var(--ion-color-primary);
  }
}

// Tabs MD3 (Navigation bar)
ion-tab-bar {
  --background: var(--surface-container);
  --border: none;
  height: 80px;
  padding-bottom: env(safe-area-inset-bottom);
  box-shadow: var(--elevation-2);
}

ion-tab-button {
  --color: var(--ion-color-medium);
  --color-selected: var(--ion-color-primary);
  --padding-top: var(--space-sm);
  
  &.tab-selected {
    ion-icon {
      background: rgba(var(--ion-color-primary-rgb), 0.12);
      padding: var(--space-xxs) var(--space-lg);
      border-radius: var(--radius-full);
    }
  }
  
  ion-label {
    font-size: 0.75rem;
    font-weight: 500;
    margin-top: var(--space-xxs);
  }
}

// -----------------------------------------------------------------------------
// CLASES UTILITARIAS MD3
// -----------------------------------------------------------------------------

// Superficies con elevación
.surface-1 { box-shadow: var(--elevation-1); }
.surface-2 { box-shadow: var(--elevation-2); }
.surface-3 { box-shadow: var(--elevation-3); }
.surface-4 { box-shadow: var(--elevation-4); }

// Contenedores de superficie
.surface-container { background: var(--surface-container); }
.surface-container-low { background: var(--surface-container-low); }
.surface-container-high { background: var(--surface-container-high); }
.surface-container-highest { background: var(--surface-container-highest); }

// Radios de borde
.rounded-xs { border-radius: var(--radius-xs); }
.rounded-sm { border-radius: var(--radius-sm); }
.rounded-md { border-radius: var(--radius-md); }
.rounded-lg { border-radius: var(--radius-lg); }
.rounded-xl { border-radius: var(--radius-xl); }
.rounded-full { border-radius: var(--radius-full); }

// Espaciado (margin/padding)
.p-xs { padding: var(--space-xs); }
.p-sm { padding: var(--space-sm); }
.p-md { padding: var(--space-md); }
.p-lg { padding: var(--space-lg); }
.p-xl { padding: var(--space-xl); }

.m-xs { margin: var(--space-xs); }
.m-sm { margin: var(--space-sm); }
.m-md { margin: var(--space-md); }
.m-lg { margin: var(--space-lg); }
.m-xl { margin: var(--space-xl); }

.gap-xs { gap: var(--space-xs); }
.gap-sm { gap: var(--space-sm); }
.gap-md { gap: var(--space-md); }
.gap-lg { gap: var(--space-lg); }

// Colores de texto
.text-primary { color: var(--ion-color-primary); }
.text-secondary { color: var(--ion-color-secondary); }
.text-muted { color: var(--ion-color-medium); }
.text-success { color: var(--ion-color-success); }
.text-warning { color: var(--ion-color-warning); }
.text-danger { color: var(--ion-color-danger); }

// Flex utilities
.flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

.flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.flex-col {
  display: flex;
  flex-direction: column;
}

// Animaciones suaves
.animate-fade-in {
  animation: fadeIn var(--transition-normal) ease-out;
}

.animate-slide-up {
  animation: slideUp var(--transition-normal) ease-out;
}

.animate-scale-in {
  animation: scaleIn var(--transition-fast) ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/**
 * Barcode Scanner Styles
 * -----------------------------------------------------
 * Estilos necesarios para hacer el WebView transparente
 * cuando el escáner de códigos de barras está activo.
 * La cámara se renderiza detrás del WebView.
 */
body.barcode-scanner-active,
body.barcode-scanner-active ion-app,
body.barcode-scanner-active ion-content,
body.barcode-scanner-active ion-router-outlet,
body.barcode-scanner-active .ion-page {
  --background: transparent !important;
  --ion-background-color: transparent !important;
  background: transparent !important;
}
// =============================================================================
// DATA AUTHORIZATION MODAL STYLES
// =============================================================================

.authorization-modal {
  --height: 90vh;
  --border-radius: 16px;

  ion-content {
    --padding-bottom: 24px;
  }

  ion-header {
    ion-toolbar {
      --padding-top: 12px;
      --padding-bottom: 12px;
    }

    ion-title {
      font-weight: 600;
      font-size: 18px;
    }
  }
}

/* Asegurar que los checkboxes sean accesibles */
.authorization-modal ion-checkbox {
  --size: 24px;

  &:focus-visible {
    outline: 2px solid var(--ion-color-primary);
    outline-offset: 2px;
  }
}

// =============================================================================
// MODO SIMPLE — Interfaz accesible para adultos mayores
// =============================================================================
// Inspirado en: tipografía agrandada, alto contraste,
// botones amplios, sin gradientes, sin animaciones, spacing generoso.
// Se activa con body.simple-mode (gestionado por AccessibilityService).
//
// Principios WCAG AAA:
// - Contraste mínimo 7:1 en texto
// - Touch targets mínimo 48px (idealmente 56–72px)
// - Font-size base 20px (scale factor ~1.25x)
// - Reduced motion: sin animaciones
// - Focus indicators visibles (outline 3px)
// =============================================================================

body.simple-mode {
  // ─── TOKENS OVERRIDE ─────────────────────────────────────────────────
  // Aumentar base tipográfica
  font-size: 20px !important;
  line-height: 1.65 !important;
  letter-spacing: 0.015em !important;

  // Espaciado ampliado
  --space-xxs: 6px;
  --space-xs: 10px;
  --space-sm: 16px;
  --space-md: 20px;
  --space-lg: 32px;
  --space-xl: 44px;
  --space-xxl: 56px;

  // Bordes más redondeados y gruesos para claridad
  --radius-sm: 12px;
  --radius-md: 16px;
  --radius-lg: 20px;
  --radius-xl: 28px;

  // Elevación simplificada — bordes sólidos en lugar de sombras sutiles
  --elevation-1: 0 2px 4px rgba(0, 0, 0, 0.12);
  --elevation-2: 0 3px 8px rgba(0, 0, 0, 0.16);
  --elevation-3: 0 6px 16px rgba(0, 0, 0, 0.18);
  --elevation-4: 0 8px 24px rgba(0, 0, 0, 0.22);

  // Sin transiciones
  --transition-fast: 0ms;
  --transition-normal: 0ms;
  --transition-slow: 0ms;

  // ─── ALTO CONTRASTE — MODO CLARO ────────────────────────────────────
  // Texto más oscuro sobre fondo más claro = contraste ~15:1
  --ion-text-color: #111827;
  --ion-text-color-rgb: 17, 24, 39;
  --ion-background-color: #FFFFFF;
  --ion-background-color-rgb: 255, 255, 255;

  // Primario más oscuro para AAA
  --ion-color-primary: #3730A3;
  --ion-color-primary-rgb: 55, 48, 163;
  --ion-color-primary-contrast: #ffffff;
  --ion-color-primary-contrast-rgb: 255, 255, 255;
  --ion-color-primary-shade: #312E81;
  --ion-color-primary-tint: #4338CA;

  // Medium más oscuro para labels secundarios
  --ion-color-medium: #4B5563;
  --ion-color-medium-rgb: 75, 85, 99;
  --ion-color-medium-shade: #374151;
  --ion-color-medium-tint: #6B7280;

  // Superficies con diferenciación clara
  --surface-container: #F3F4F6;
  --surface-container-low: #F9FAFB;
  --surface-container-high: #E5E7EB;
  --surface-container-highest: #D1D5DB;
  --surface-bright: #FFFFFF;

  --ion-border-color: #D1D5DB;

  // Colores de acción más saturados
  --ion-color-success: #047857;
  --ion-color-success-rgb: 4, 120, 87;
  --ion-color-danger: #DC2626;
  --ion-color-danger-rgb: 220, 38, 38;
  --ion-color-warning: #D97706;
  --ion-color-warning-rgb: 217, 119, 6;

  // ─── TIPOGRAFÍA GLOBAL OVERRIDE ─────────────────────────────────────
  * {
    // Forzar sin animaciones
    animation-duration: 0ms !important;
    animation-delay: 0ms !important;
    transition-duration: 0ms !important;
    transition-delay: 0ms !important;
  }

  // Asegurar font-family legible
  &,
  ion-content,
  ion-item,
  ion-label,
  ion-input,
  ion-select,
  ion-textarea,
  ion-button,
  ion-card-content,
  ion-note {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
  }

  // ─── HEADINGS AMPLIADOS ─────────────────────────────────────────────
  h1, .display-large { font-size: 2.5rem !important; font-weight: 800 !important; }
  h2, .headline-medium { font-size: 1.75rem !important; font-weight: 700 !important; }
  h3, .headline-small, .title-large { font-size: 1.375rem !important; font-weight: 700 !important; }
  h4, .title-medium { font-size: 1.125rem !important; font-weight: 600 !important; }

  .body-large { font-size: 1.1875rem !important; line-height: 1.65 !important; }
  .body-medium { font-size: 1.0625rem !important; line-height: 1.6 !important; }
  .body-small { font-size: 0.9375rem !important; line-height: 1.55 !important; }

  .label-large { font-size: 1.0625rem !important; font-weight: 600 !important; }
  .label-medium { font-size: 0.9375rem !important; font-weight: 600 !important; }

  .text-muted {
    color: var(--ion-color-medium-shade) !important;
  }

  // ─── COMPONENTES IONIC — SIMPLE MODE ────────────────────────────────

  // Toolbar agrandada
  ion-toolbar {
    --min-height: 72px;
    --padding-top: var(--space-sm);
    --padding-bottom: var(--space-sm);

    ion-title {
      font-size: 1.375rem !important;
      font-weight: 700 !important;
    }

    ion-back-button {
      --icon-font-size: 28px;
      --min-height: 48px;
      --min-width: 48px;
    }
  }

  // Botones: grandes, sólidos, sin gradientes
  ion-button {
    --border-radius: var(--radius-lg) !important;
    --padding-start: var(--space-lg) !important;
    --padding-end: var(--space-lg) !important;
    min-height: 56px !important;
    font-size: 1.125rem !important;
    font-weight: 700 !important;
    letter-spacing: 0.01em !important;
    text-transform: none !important;

    // Sin gradientes — colores sólidos
    --background: var(--ion-color-primary) !important;
    --box-shadow: var(--elevation-2) !important;

    // Focus visible amplificado
    &:focus-visible {
      outline: 3px solid var(--ion-color-primary) !important;
      outline-offset: 3px !important;
    }

    &[fill="outline"] {
      --background: transparent !important;
      --border-width: 2.5px !important;
    }

    &[fill="clear"] {
      --background: transparent !important;
      --box-shadow: none !important;
      min-height: 48px !important;
    }

    // Botón grande/expandido
    &[expand="block"],
    &[size="large"] {
      min-height: 64px !important;
      font-size: 1.1875rem !important;
    }
  }

  // FAB más grande
  ion-fab-button {
    --border-radius: var(--radius-xl) !important;
    width: 68px !important;
    height: 68px !important;
    --background: var(--ion-color-primary) !important;
    --box-shadow: var(--elevation-3) !important;

    ion-icon {
      font-size: 32px !important;
    }
  }

  // Cards con borde visible
  ion-card {
    border-radius: var(--radius-lg) !important;
    border: 2px solid var(--ion-border-color) !important;
    box-shadow: var(--elevation-1) !important;

    ion-card-title {
      font-size: 1.25rem !important;
      font-weight: 700 !important;
    }

    ion-card-subtitle {
      font-size: 1rem !important;
    }

    ion-card-content {
      font-size: 1.0625rem !important;
      line-height: 1.6 !important;
    }
  }

  // Items más altos con más padding
  ion-item {
    --min-height: 64px !important;
    --padding-start: var(--space-md) !important;
    --padding-end: var(--space-md) !important;

    ion-label {
      h2, h3 {
        font-size: 1.0625rem !important;
        font-weight: 600 !important;
      }

      p {
        font-size: 0.9375rem !important;
        line-height: 1.5 !important;
        color: var(--ion-color-medium-shade) !important;
      }
    }

    ion-icon[slot="start"] {
      font-size: 1.75rem !important;
      margin-right: var(--space-md) !important;
    }
  }

  // Inputs más grandes
  ion-input, ion-textarea, ion-select {
    --padding-start: var(--space-md) !important;
    --padding-end: var(--space-md) !important;
    font-size: 1.0625rem !important;
    min-height: 56px !important;
  }

  // Toggle más grande
  ion-toggle {
    --handle-width: 30px;
    --handle-height: 30px;
    --handle-max-height: 30px;
    transform: scale(1.15);
  }

  // Chips más legibles
  ion-chip {
    font-size: 0.9375rem !important;
    font-weight: 600 !important;
    padding: var(--space-xs) var(--space-md) !important;
    min-height: 40px !important;
  }

  // Focus global amplificado para teclado
  *:focus-visible {
    outline: 3px solid var(--ion-color-primary) !important;
    outline-offset: 2px !important;
  }

  // Scrollbar más gruesa para visibilidad
  ::-webkit-scrollbar {
    width: 10px;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--ion-color-medium-tint);
    border-radius: var(--radius-full);
  }

  // ─── ALERTS/TOASTS/MODALS — SIMPLE MODE ─────────────────────────────
  ion-alert {
    .alert-title {
      font-size: 1.375rem !important;
      font-weight: 700 !important;
    }

    .alert-message {
      font-size: 1.0625rem !important;
      line-height: 1.6 !important;
    }

    .alert-button {
      font-size: 1.0625rem !important;
      font-weight: 600 !important;
      min-height: 48px !important;
    }
  }

  ion-toast {
    font-size: 1.0625rem !important;
    font-weight: 600 !important;
  }

  ion-loading {
    .loading-content {
      font-size: 1.0625rem !important;
    }
  }

  // ─── CHECKBOXES ACCESIBLES ──────────────────────────────────────────
  ion-checkbox {
    --size: 32px !important;
    --checkbox-background-checked: var(--ion-color-primary);

    &:focus-visible {
      outline: 3px solid var(--ion-color-primary) !important;
      outline-offset: 3px !important;
    }
  }

  // ─── PROGRESS BAR ──────────────────────────────────────────────────
  ion-progress-bar {
    height: 8px !important;
    border-radius: var(--radius-full) !important;
  }

  // ─── SPINNER ────────────────────────────────────────────────────────
  ion-spinner {
    width: 52px !important;
    height: 52px !important;
  }

  // ─── GLOBAL ICON REDUCTION — TEXT FIRST ──────────────────────────────
  // In simple mode, decorative icons add visual clutter without meaning.
  // Hide purely decorative icons; keep only functional ones (checkmarks in forms).

  // Hide hero/decorative icons globally
  .hero-icon,
  .mode-icon-wrapper,
  .active-icon,
  .result-icon .sparkle,
  .sparkles {
    display: none !important;
  }

  // Reduce section header icon sizes — text is primary
  .info-section h4 ion-icon,
  .section-header ion-icon,
  .form-card ion-card-title ion-icon,
  .info-banner > ion-icon,
  .legal-card ion-icon {
    font-size: 1.125rem !important;
    flex-shrink: 0;
  }

  // Feature list / instruction list icons: small and muted
  .features-list ion-icon,
  .instructions-list ion-icon {
    font-size: 1.25rem !important;
    opacity: 0.7;
  }

  // ─── DATA-AUTHORIZATION PAGE ────────────────────────────────────────
  // Override hardcoded px/rem font sizes in the authorization page
  .gradient-header {
    display: none !important; // No gradients in simple mode
  }

  .auth-toolbar-title {
    font-size: 1.25rem !important;
    font-weight: 700 !important;
  }

  .hero-section {
    .hero-icon {
      background: rgba(var(--ion-color-primary-rgb), 0.12) !important;
      box-shadow: none !important; // Solid border instead

      ion-icon {
        font-size: 68px !important;
      }
    }

    h1 {
      font-size: 1.75rem !important;
      font-weight: 700 !important;
    }

    p {
      font-size: 1.125rem !important;
      max-width: 340px !important;
    }
  }

  .legal-text {
    font-size: 1rem !important;
    line-height: 1.65 !important;
    color: var(--ion-text-color) !important;

    &.legal-secondary {
      font-size: 0.9375rem !important;
      line-height: 1.6 !important;
    }
  }

  .checkbox-card {
    border: 2px solid var(--ion-border-color) !important;
    border-radius: var(--radius-md) !important;

    &.checked {
      border-color: var(--ion-color-primary) !important;
      background: rgba(var(--ion-color-primary-rgb), 0.06) !important;
    }

    .label-title {
      font-size: 1.0625rem !important;
      font-weight: 700 !important;
    }

    .label-description {
      font-size: 0.9375rem !important;
      line-height: 1.5 !important;
    }
  }

  .primary-action {
    height: 64px !important;
    font-size: 1.125rem !important;
    font-weight: 700 !important;
    --background: var(--ion-color-primary) !important; // Solid, no gradient
    --box-shadow: var(--elevation-2) !important;
    --border-radius: var(--radius-lg) !important;
  }

  .secondary-action {
    font-size: 1.0625rem !important;
    min-height: 48px !important;
  }

  // ─── VERIFICACION PAGE — TEXT-FIRST ──────────────────────────────────
  .verificacion-container {
    padding: var(--space-xl) !important;
  }

  .loading-icon {
    width: 80px !important;
    height: 80px !important;
    opacity: 0.6;

    ion-spinner {
      width: 40px !important;
      height: 40px !important;
    }
  }

  .step {
    padding: var(--space-md) !important;
    border-radius: var(--radius-md) !important;

    ion-icon {
      font-size: 1.25rem !important;
    }

    span {
      font-size: 1.125rem !important;
      font-weight: 700 !important;
    }
  }

  .result-icon {
    width: 72px !important;
    height: 72px !important;

    ion-icon {
      font-size: 44px !important;
    }
  }

  .afiliado-card {
    border: 2px solid var(--ion-border-color) !important;
    border-radius: var(--radius-lg) !important;

    ion-card-title {
      font-size: 1.375rem !important;
      font-weight: 800 !important;
    }
  }

  .info-row {
    padding: var(--space-sm) 0 !important;

    .label {
      font-size: 1.0625rem !important;
      font-weight: 600 !important;
      color: var(--ion-color-medium-shade) !important;
    }

    .value {
      font-size: 1.125rem !important;
      font-weight: 700 !important;
      color: var(--ion-text-color) !important;
    }
  }

  .options-section {
    p {
      font-size: 1.125rem !important;
      line-height: 1.6 !important;
    }

    ion-button {
      margin-bottom: var(--space-md) !important;
      --border-radius: var(--radius-lg) !important;
      min-height: 64px !important;
      font-size: 1.125rem !important;
    }
  }

  // ─── SHARED FORM PAGES — TEXT-FIRST ─────────────────────────────────
  .progress-container {
    padding: var(--space-md) !important;
  }

  .step-label {
    font-size: 1.0625rem !important;
    font-weight: 700 !important;
  }

  .step-title {
    font-size: 1.125rem !important;
    font-weight: 600 !important;
  }

  .form-container {
    padding: var(--space-lg) var(--space-md) !important;
  }

  .info-banner {
    padding: var(--space-lg) !important;
    border-radius: var(--radius-lg) !important;
    border-width: 2px !important;
    border-left: 4px solid var(--ion-color-primary) !important;
    background: var(--surface-container) !important;

    ion-icon {
      display: none !important; // Text is enough
    }

    p {
      font-size: 1.0625rem !important;
      line-height: 1.65 !important;
      color: var(--ion-text-color) !important;
    }
  }

  .form-card {
    border: 2px solid var(--ion-border-color) !important;
    border-radius: var(--radius-lg) !important;
    box-shadow: var(--elevation-1) !important;

    ion-card-title {
      font-size: 1.375rem !important;
      font-weight: 700 !important;

      ion-icon {
        font-size: 1.125rem !important;
      }
    }
  }

  .optional-chip {
    font-size: 0.875rem !important;
    height: 28px !important;
  }

  .error-note {
    font-size: 1rem !important;
    font-weight: 600 !important;
    padding: var(--space-sm) var(--space-md) !important;
  }

  .hint-note {
    font-size: 1rem !important;
  }

  .match-indicator ion-chip {
    font-size: 1rem !important;
    min-height: 36px !important;
  }

  .form-actions {
    gap: var(--space-lg) !important;
    padding-bottom: var(--space-xxl) !important;

    ion-button {
      min-height: 64px !important;
      font-size: 1.125rem !important;
      font-weight: 700 !important;
    }
  }

  // ─── CONFIRMATION PAGE — TEXT-FIRST ──────────────────────────────────
  .confirmation-container {
    padding: var(--space-xl) !important;
  }

  .success-icon {
    width: 80px !important;
    height: 80px !important;

    ion-icon {
      font-size: 48px !important;
    }
  }

  .sparkles {
    display: none !important; // No decorative animations
  }

  .summary-card {
    border: 2px solid var(--ion-border-color) !important;
    border-radius: var(--radius-lg) !important;

    ion-card-title {
      font-size: 1.25rem !important;
      font-weight: 700 !important;

      ion-icon {
        font-size: 1.125rem !important;
      }
    }
  }

  .section-header {
    ion-icon {
      display: none !important; // Text is enough
    }

    h3 {
      font-size: 1.125rem !important;
      font-weight: 700 !important;
    }
  }

  .summary-list {
    ion-label {
      p {
        font-size: 1rem !important;
      }

      h4 {
        font-size: 1.125rem !important;
        font-weight: 700 !important;
      }
    }

    ion-icon[slot="end"] {
      font-size: 1.25rem !important;
    }
  }

  .timestamp {
    p {
      font-size: 1.0625rem !important;
    }
  }

  .actions-section {
    ion-button {
      --border-radius: var(--radius-lg) !important;
      min-height: 64px !important;
      margin-bottom: var(--space-md) !important;
    }
  }

  // ─── BENEFICIARIES PAGES — TEXT-FIRST ──────────────────────────────
  .header-icon ion-icon {
    display: none !important;
  }

  .empty-state {
    ion-icon {
      font-size: 48px !important;
      opacity: 0.4;
    }

    h3 {
      font-size: 1.375rem !important;
      font-weight: 800 !important;
    }

    p {
      font-size: 1.125rem !important;
      line-height: 1.6 !important;
    }
  }

  .beneficiary-avatar span {
    font-size: 1.5rem !important;
    font-weight: 700 !important;
  }

  .beneficiary-name {
    font-size: 1.25rem !important;
    font-weight: 700 !important;
  }

  .beneficiary-details {
    font-size: 1.0625rem !important;
  }

  .beneficiary-chips ion-chip {
    font-size: 0.875rem !important;
    min-height: 30px !important;
  }

  .status-icon {
    font-size: 1.5rem !important;
  }

  .chevron-icon {
    font-size: 1.25rem !important;
  }

  .update-note {
    font-size: 1.0625rem !important;
    line-height: 1.6 !important;
  }

  .beneficiary-info {
    h2 {
      font-size: 1.375rem !important;
      font-weight: 800 !important;
    }

    p {
      font-size: 1.0625rem !important;
    }
  }

  .required-chip {
    font-size: 0.875rem !important;
  }

  // ─── WEB SCANNER PAGE ─────────────────────────────────────────────
  .instruction-text {
    font-size: 1.0625rem !important;
  }

  .open-camera-btn {
    height: 64px !important;
    font-size: 1.125rem !important;
  }

  .error-banner {
    font-size: 1rem !important;
  }

  .guide-text {
    font-size: 1.0625rem !important;
  }

  .capture-btn {
    width: 80px !important;
    height: 80px !important;
  }

  .processing-container ion-spinner {
    width: 64px !important;
    height: 64px !important;
  }

  .error-content ion-icon {
    font-size: 3.5rem !important;
  }

  .result-header {
    ion-icon {
      font-size: 2.5rem !important;
    }

    h3 {
      font-size: 1.25rem !important;
    }
  }

  .cedula-number {
    .label {
      font-size: 0.9375rem !important;
    }

    .number {
      font-size: 2rem !important;
      font-weight: 800 !important;
    }
  }

  .data-list {
    ion-label {
      p {
        font-size: 0.9375rem !important;
      }

      h3 {
        font-size: 1.125rem !important;
        font-weight: 600 !important;
      }
    }
  }

  .confidence-label {
    font-size: 1rem !important;
  }
}

// ─── SIMPLE MODE — DARK VARIANT ──────────────────────────────────────
@media (prefers-color-scheme: dark) {
  body.simple-mode {
    --ion-text-color: #F9FAFB;
    --ion-text-color-rgb: 249, 250, 251;
    --ion-background-color: #0A0F1A;
    --ion-background-color-rgb: 10, 15, 26;

    --ion-color-primary: #A5B4FC;
    --ion-color-primary-rgb: 165, 180, 252;
    --ion-color-primary-contrast: #1E1B4B;
    --ion-color-primary-contrast-rgb: 30, 27, 75;
    --ion-color-primary-shade: #818CF8;
    --ion-color-primary-tint: #C7D2FE;

    --ion-color-medium: #9CA3AF;
    --ion-color-medium-rgb: 156, 163, 175;
    --ion-color-medium-shade: #D1D5DB;
    --ion-color-medium-tint: #6B7280;

    --surface-container: #1F2937;
    --surface-container-low: #111827;
    --surface-container-high: #374151;
    --surface-container-highest: #4B5563;
    --surface-bright: #1F2937;

    --ion-border-color: #4B5563;

    --ion-color-success: #34D399;
    --ion-color-success-rgb: 52, 211, 153;
    --ion-color-danger: #FB7185;
    --ion-color-danger-rgb: 251, 113, 133;
    --ion-color-warning: #FBBF24;
    --ion-color-warning-rgb: 251, 191, 36;

    ion-card {
      border-color: var(--ion-border-color) !important;
    }
  }
}

// =============================================================================
// RESPONSIVE BREAKPOINTS — Global compatibility
// =============================================================================

// ─── Safe areas (notch, home indicator, dynamic island) ─────────────
ion-content {
  --padding-top: env(safe-area-inset-top);
  --padding-bottom: env(safe-area-inset-bottom);
}

ion-toolbar {
  padding-top: env(safe-area-inset-top);
}

// Bottom actions should respect safe area
.actions-container,
.form-actions,
.actions-section {
  padding-bottom: calc(var(--space-lg, 24px) + env(safe-area-inset-bottom, 0px));
}

// ─── Global ion-select text overflow fix ────────────────────────────
// Prevents truncated placeholder/value text across all forms
ion-select::part(text) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

// ─── Global form responsive helpers ─────────────────────────────────
// Cross-cutting responsive + simple-mode form styles
@media (max-width: 380px) {
  .form-card ion-card-title {
    font-size: 1.125rem !important;
  }

  .form-actions {
    flex-direction: column !important;
    gap: 0.5rem !important;
  }

  .form-actions ion-button {
    min-height: 2.75rem !important;
    font-size: 0.875rem !important;
  }

  .info-banner p {
    font-size: 0.8125rem !important;
  }

  body.simple-mode {
    .form-card ion-card-title {
      font-size: 1.25rem !important;
    }

    .form-actions ion-button {
      min-height: 3.25rem !important;
      font-size: 1rem !important;
    }
  }
}

// ─── Small phones (320px–360px, e.g. iPhone SE, Galaxy A01) ─────────
@media (max-width: 360px) {
  :root {
    --space-lg: 20px;
    --space-xl: 28px;
    --space-xxl: 36px;
  }

  // Tighter padding on small screens
  .auth-container,
  .form-container,
  .verificacion-container,
  .confirmation-container,
  .scanner-container {
    padding-left: 12px !important;
    padding-right: 12px !important;
  }

  // Smaller hero headings
  .hero-section h1,
  .hero-section h2,
  .headline-medium {
    font-size: 1.375rem !important;
  }

  // Smaller buttons on tiny screens
  ion-button[expand="block"],
  ion-button[size="large"] {
    min-height: 48px !important;
    font-size: 0.9375rem !important;
  }

  .scan-button,
  .simple-scan-button,
  .primary-action {
    height: 52px !important;
    font-size: 0.9375rem !important;
  }

  // Grid info items: single column on tiny screens
  .info-grid {
    grid-template-columns: 1fr !important;
  }

  // Button row in scanner: stack vertically
  .button-row {
    grid-template-columns: 1fr !important;
  }

  // Cards tighter padding
  ion-card-content {
    padding: 12px !important;
  }

  // Simple mode on small phones
  body.simple-mode {
    font-size: 18px !important;

    h1, .display-large { font-size: 1.75rem !important; }
    h2, .headline-medium { font-size: 1.5rem !important; }
    h3, .title-large { font-size: 1.25rem !important; }

    ion-button[expand="block"],
    ion-button[size="large"] {
      min-height: 56px !important;
      font-size: 1rem !important;
    }

    ion-toolbar {
      --min-height: 60px;
    }
  }
}

// ─── Standard phones (361px–480px) ──────────────────────────────────
@media (min-width: 361px) and (max-width: 480px) {
  .auth-container,
  .form-container,
  .verificacion-container {
    max-width: 100%;
    padding-left: 16px;
    padding-right: 16px;
  }
}

// ─── Tablets (768px+) ───────────────────────────────────────────────
@media (min-width: 768px) {
  // Center content with max-width
  .auth-container,
  .form-container,
  .verificacion-container,
  .confirmation-container,
  .scanner-container {
    max-width: 560px;
    margin-left: auto;
    margin-right: auto;
  }

  // Info grid: 2 columns always on tablet
  .info-grid {
    grid-template-columns: repeat(2, 1fr);
  }

  // Larger hero on tablet
  .hero-section {
    padding: var(--space-xl) var(--space-lg) var(--space-xxl);

    h1, h2 {
      font-size: 2.25rem;
    }

    p {
      font-size: 1.125rem;
      max-width: 440px;
    }
  }

  // Cards wider
  ion-card {
    max-width: 560px;
    margin-left: auto !important;
    margin-right: auto !important;
  }

  // Simple mode on tablet: even larger text
  body.simple-mode {
    h1 { font-size: 2.75rem !important; }
    h2 { font-size: 2rem !important; }

    ion-button[expand="block"] {
      max-width: 480px;
      margin-left: auto !important;
      margin-right: auto !important;
    }

    .simple-scan-hero,
    .simple-hero {
      max-width: 520px;
      margin-left: auto;
      margin-right: auto;
    }
  }
}

// ─── Large tablets & Desktop (1024px+) ──────────────────────────────
@media (min-width: 1024px) {
  .auth-container,
  .form-container,
  .verificacion-container,
  .confirmation-container,
  .scanner-container {
    max-width: 640px;
  }
}

// ─── Landscape orientation ──────────────────────────────────────────
@media (orientation: landscape) and (max-height: 500px) {
  // Reduce vertical spacing in landscape on phones
  .hero-section {
    padding: var(--space-sm) var(--space-md) !important;
    margin-bottom: var(--space-sm) !important;

    .hero-icon {
      width: 48px !important;
      height: 48px !important;

      ion-icon {
        font-size: 28px !important;
      }
    }

    h1, h2 {
      font-size: 1.25rem !important;
      margin-bottom: var(--space-xxs) !important;
    }
  }

  .fomag-branding-section {
    min-height: 80px !important;
    padding: var(--space-sm) !important;

    .fomag-logo {
      max-width: 200px !important;
    }
  }

  .simple-hero {
    padding: var(--space-sm) var(--space-md) !important;

    h1 {
      font-size: 1.5rem !important;
    }
  }

  // Reduce toolbar in landscape
  ion-toolbar {
    --min-height: 48px !important;
  }
}

// ─── High DPI / Large text accessibility zoom ───────────────────────
@media (min-resolution: 2dppx) {
  // Ensure images are crisp at 2x
  .fomag-logo {
    image-rendering: -webkit-optimize-contrast;
  }
}

// ─── Prefers reduced motion ─────────────────────────────────────────
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

// ─── Print stylesheet ───────────────────────────────────────────────
@media print {
  ion-header,
  ion-footer,
  ion-fab,
  ion-back-button,
  .gradient-header,
  .dev-bypass-separator {
    display: none !important;
  }

  ion-content {
    --background: white;
    color: black;
  }

  ion-card {
    box-shadow: none !important;
    border: 1px solid #ccc !important;
    break-inside: avoid;
  }
}