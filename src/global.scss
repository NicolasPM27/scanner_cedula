/*
 * App Global CSS
 * ----------------------------------------------------------------------------
 * Actualización de datos - Material Design 3 Global Styles by FOMAG
 * Estilos globales modernos con tokens de diseño MD3
 * ----------------------------------------------------------------------------
 */

/* Importar variables de tema primero */
@use "./theme/variables.scss" as *;

/* Core CSS required for Ionic components to work properly */
@import "@ionic/angular/css/core.css";

/* Basic CSS for apps built with Ionic */
@import "@ionic/angular/css/normalize.css";
@import "@ionic/angular/css/structure.css";
@import "@ionic/angular/css/typography.css";
@import "@ionic/angular/css/display.css";

/* Optional CSS utils that can be commented out */
@import "@ionic/angular/css/padding.css";
@import "@ionic/angular/css/float-elements.css";
@import "@ionic/angular/css/text-alignment.css";
@import "@ionic/angular/css/text-transformation.css";
@import "@ionic/angular/css/flex-utils.css";

/**
 * Ionic Dark Mode
 * -----------------------------------------------------
 * For more info, please see:
 * https://ionicframework.com/docs/theming/dark-mode
 */

/* @import "@ionic/angular/css/palettes/dark.always.css"; */
/* @import "@ionic/angular/css/palettes/dark.class.css"; */
@import '@ionic/angular/css/palettes/dark.system.css';

// =============================================================================
// MATERIAL DESIGN 3 - ESTILOS GLOBALES
// =============================================================================

// -----------------------------------------------------------------------------
// TIPOGRAFÍA GLOBAL
// -----------------------------------------------------------------------------
html {
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: var(--ion-font-family);
  line-height: 1.5;
  letter-spacing: 0.01em;
}

// Headings con tipografía de display
h1, h2, h3, h4, h5, h6,
ion-title,
.display-large,
.display-medium,
.display-small,
.headline-large,
.headline-medium,
.headline-small {
  font-family: var(--ion-heading-font-family);
  font-weight: 600;
  letter-spacing: -0.02em;
}

// Escala tipográfica MD3
.display-large {
  font-size: 3.5rem;
  line-height: 1.1;
  font-weight: 700;
}

.display-medium {
  font-size: 2.75rem;
  line-height: 1.15;
  font-weight: 700;
}

.display-small {
  font-size: 2.25rem;
  line-height: 1.2;
  font-weight: 600;
}

.headline-large {
  font-size: 2rem;
  line-height: 1.25;
}

.headline-medium {
  font-size: 1.75rem;
  line-height: 1.3;
}

.headline-small {
  font-size: 1.5rem;
  line-height: 1.35;
}

.title-large {
  font-size: 1.375rem;
  line-height: 1.4;
  font-weight: 500;
}

.title-medium {
  font-size: 1rem;
  line-height: 1.5;
  font-weight: 500;
  letter-spacing: 0.01em;
}

.title-small {
  font-size: 0.875rem;
  line-height: 1.45;
  font-weight: 500;
  letter-spacing: 0.005em;
}

.body-large {
  font-size: 1rem;
  line-height: 1.5;
}

.body-medium {
  font-size: 0.875rem;
  line-height: 1.45;
}

.body-small {
  font-size: 0.75rem;
  line-height: 1.4;
}

.label-large {
  font-size: 0.875rem;
  line-height: 1.45;
  font-weight: 500;
  letter-spacing: 0.02em;
}

.label-medium {
  font-size: 0.75rem;
  line-height: 1.4;
  font-weight: 500;
  letter-spacing: 0.03em;
}

.label-small {
  font-size: 0.6875rem;
  line-height: 1.35;
  font-weight: 500;
  letter-spacing: 0.03em;
}

// -----------------------------------------------------------------------------
// COMPONENTES IONIC - ESTILOS MD3
// -----------------------------------------------------------------------------

// Toolbar modernizado
ion-toolbar {
  --background: var(--ion-toolbar-background);
  --border-width: 0;
  --padding-top: var(--space-xs);
  --padding-bottom: var(--space-xs);
  --padding-start: var(--space-md);
  --padding-end: var(--space-md);
  
  ion-title {
    font-family: var(--ion-heading-font-family);
    font-size: 1.25rem;
    font-weight: 600;
    letter-spacing: -0.01em;
  }
}

// Header con sombra sutil
ion-header {
  &::after {
    background-image: none !important;
  }
  
  &:not(.header-collapse-condense-inactive) {
    box-shadow: var(--elevation-1);
  }
}

// Content con fondo de superficie
ion-content {
  --background: var(--ion-background-color);
  --padding-start: var(--space-md);
  --padding-end: var(--space-md);
  --padding-top: var(--space-md);
  --padding-bottom: var(--space-lg);
}

// Cards MD3
ion-card {
  --background: var(--ion-card-background);
  border-radius: var(--radius-lg);
  box-shadow: var(--elevation-2);
  margin: var(--space-sm);
  overflow: hidden;
  transition: box-shadow var(--transition-normal), transform var(--transition-normal);
  
  &:hover {
    box-shadow: var(--elevation-3);
  }
  
  ion-card-header {
    padding: var(--space-md) var(--space-md) var(--space-xs);
  }
  
  ion-card-title {
    font-family: var(--ion-heading-font-family);
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--ion-text-color);
  }
  
  ion-card-subtitle {
    font-size: 0.875rem;
    color: var(--ion-color-medium);
    margin-top: var(--space-xxs);
  }
  
  ion-card-content {
    padding: var(--space-sm) var(--space-md) var(--space-md);
    font-size: 0.9375rem;
    line-height: 1.5;
  }
}

// Buttons MD3 con elevación y estados
ion-button {
  --border-radius: var(--radius-full);
  --padding-start: var(--space-lg);
  --padding-end: var(--space-lg);
  --box-shadow: var(--elevation-1);
  font-family: var(--ion-font-family);
  font-weight: 500;
  font-size: 0.875rem;
  letter-spacing: 0.02em;
  text-transform: none;
  transition: all var(--transition-normal);
  
  &:hover {
    --box-shadow: var(--elevation-2);
    opacity: 0.92;
  }
  
  &:active {
    transform: scale(0.98);
  }
  
  // Filled button (default)
  &[fill="solid"] {
    --box-shadow: var(--elevation-2);
  }
  
  // Outlined button
  &[fill="outline"] {
    --border-width: 1.5px;
    --box-shadow: none;
  }
  
  // Tonal button (MD3 filled tonal)
  &.button-tonal {
    --background: rgba(var(--ion-color-primary-rgb), 0.12);
    --color: var(--ion-color-primary);
    --box-shadow: none;
  }
  
  // Elevated button
  &.button-elevated {
    --background: var(--surface-container-low);
    --color: var(--ion-color-primary);
    --box-shadow: var(--elevation-2);
  }
}

// FAB MD3
ion-fab-button {
  --background: var(--ion-color-primary);
  --box-shadow: var(--elevation-3);
  --border-radius: var(--radius-lg);
  transition: all var(--transition-normal);
  
  &:hover {
    --box-shadow: var(--elevation-4);
  }
  
  // FAB pequeño
  &[size="small"] {
    --border-radius: var(--radius-md);
  }
  
  // Extended FAB
  &.fab-extended {
    --border-radius: var(--radius-lg);
    width: auto;
    padding: 0 var(--space-md);
  }
}

// Items y listas MD3
ion-item {
  --background: var(--ion-item-background);
  --padding-start: var(--space-md);
  --padding-end: var(--space-md);
  --inner-padding-end: 0;
  --min-height: 56px;
  --border-color: transparent;
  --border-radius: var(--radius-md);
  margin-bottom: var(--space-xxs);
  
  &::part(native) {
    border-radius: var(--radius-md);
  }
  
  ion-label {
    margin: var(--space-sm) 0;
    
    h2, h3 {
      font-weight: 500;
      color: var(--ion-text-color);
    }
    
    p {
      color: var(--ion-color-medium);
      margin-top: var(--space-xxs);
    }
  }
  
  // Item con avatar
  ion-avatar {
    width: 40px;
    height: 40px;
    margin-right: var(--space-md);
  }
  
  // Item con icono leading
  ion-icon[slot="start"] {
    margin-right: var(--space-md);
    font-size: 1.5rem;
    color: var(--ion-color-medium);
  }
}

ion-list {
  background: transparent;
  padding: var(--space-xs) 0;
  
  // Lista con inset
  &.list-inset {
    margin: 0 var(--space-md);
    border-radius: var(--radius-lg);
    overflow: hidden;
    
    ion-item:first-child {
      border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    }
    
    ion-item:last-child {
      border-radius: 0 0 var(--radius-lg) var(--radius-lg);
      margin-bottom: 0;
    }
  }
}

// Inputs MD3
ion-input, ion-textarea {
  --background: var(--surface-container);
  --padding-start: var(--space-md);
  --padding-end: var(--space-md);
  --padding-top: var(--space-sm);
  --padding-bottom: var(--space-sm);
  --border-radius: var(--radius-md) var(--radius-md) 0 0;
  --highlight-color-focused: var(--ion-color-primary);
  font-size: 1rem;
  margin-bottom: var(--space-sm);
  
  &.has-focus {
    --background: var(--surface-container-high);
  }
}

// Chips MD3
ion-chip {
  --background: var(--surface-container-high);
  --color: var(--ion-text-color);
  border-radius: var(--radius-sm);
  font-size: 0.875rem;
  font-weight: 500;
  padding: var(--space-xs) var(--space-md);
  
  &[color="primary"] {
    --background: rgba(var(--ion-color-primary-rgb), 0.12);
    --color: var(--ion-color-primary);
  }
}

// Badges MD3
ion-badge {
  --padding-start: var(--space-sm);
  --padding-end: var(--space-sm);
  border-radius: var(--radius-full);
  font-size: 0.75rem;
  font-weight: 600;
  letter-spacing: 0.01em;
}

// Segmented buttons MD3
ion-segment {
  --background: var(--surface-container);
  border-radius: var(--radius-full);
  padding: var(--space-xxs);
  
  ion-segment-button {
    --background-checked: var(--surface-container-highest);
    --indicator-box-shadow: none;
    --border-radius: var(--radius-full);
    --padding-start: var(--space-md);
    --padding-end: var(--space-md);
    min-height: 40px;
    font-weight: 500;
    text-transform: none;
    
    &::part(indicator-background) {
      border-radius: var(--radius-full);
    }
  }
}

// Modales y sheets MD3
ion-modal {
  --border-radius: var(--radius-xl) var(--radius-xl) 0 0;
  --box-shadow: var(--elevation-4);
  
  &.modal-card {
    --border-radius: var(--radius-xl);
  }
  
  ion-toolbar:first-of-type {
    padding-top: var(--space-sm);
  }
}

// Action sheets MD3
ion-action-sheet {
  --background: var(--surface-container);
  --button-background: transparent;
  --button-background-activated: rgba(var(--ion-color-primary-rgb), 0.08);
  
  .action-sheet-group {
    border-radius: var(--radius-xl);
    margin: var(--space-sm);
  }
}

// Toast MD3
ion-toast {
  --background: var(--surface-container-highest);
  --color: var(--ion-text-color);
  --border-radius: var(--radius-md);
  --box-shadow: var(--elevation-3);
  font-weight: 500;
}

// Alerts MD3
ion-alert {
  --background: var(--surface-container-high);
  --border-radius: var(--radius-xl);
  
  .alert-title {
    font-family: var(--ion-heading-font-family);
    font-weight: 600;
    font-size: 1.25rem;
  }
  
  .alert-button {
    font-weight: 500;
    text-transform: none;
  }
}

// Loading y Spinners
ion-loading {
  --background: var(--surface-container-high);
  --spinner-color: var(--ion-color-primary);
  --border-radius: var(--radius-xl);
}

ion-spinner {
  --color: var(--ion-color-primary);
}

// Progress indicators
ion-progress-bar {
  --background: var(--surface-container-highest);
  --progress-background: var(--ion-color-primary);
  border-radius: var(--radius-full);
  height: 4px;
}

// Skeleton loaders
ion-skeleton-text {
  --background: var(--surface-container-high);
  --background-rgb: var(--ion-color-medium-rgb);
  border-radius: var(--radius-sm);
}

// Refresher
ion-refresher {
  ion-refresher-content {
    --pulling-icon: var(--ion-color-primary);
    --spinner-icon: var(--ion-color-primary);
  }
}

// Tabs MD3 (Navigation bar)
ion-tab-bar {
  --background: var(--surface-container);
  --border: none;
  height: 80px;
  padding-bottom: env(safe-area-inset-bottom);
  box-shadow: var(--elevation-2);
}

ion-tab-button {
  --color: var(--ion-color-medium);
  --color-selected: var(--ion-color-primary);
  --padding-top: var(--space-sm);
  
  &.tab-selected {
    ion-icon {
      background: rgba(var(--ion-color-primary-rgb), 0.12);
      padding: var(--space-xxs) var(--space-lg);
      border-radius: var(--radius-full);
    }
  }
  
  ion-label {
    font-size: 0.75rem;
    font-weight: 500;
    margin-top: var(--space-xxs);
  }
}

// -----------------------------------------------------------------------------
// CLASES UTILITARIAS MD3
// -----------------------------------------------------------------------------

// Superficies con elevación
.surface-1 { box-shadow: var(--elevation-1); }
.surface-2 { box-shadow: var(--elevation-2); }
.surface-3 { box-shadow: var(--elevation-3); }
.surface-4 { box-shadow: var(--elevation-4); }

// Contenedores de superficie
.surface-container { background: var(--surface-container); }
.surface-container-low { background: var(--surface-container-low); }
.surface-container-high { background: var(--surface-container-high); }
.surface-container-highest { background: var(--surface-container-highest); }

// Radios de borde
.rounded-xs { border-radius: var(--radius-xs); }
.rounded-sm { border-radius: var(--radius-sm); }
.rounded-md { border-radius: var(--radius-md); }
.rounded-lg { border-radius: var(--radius-lg); }
.rounded-xl { border-radius: var(--radius-xl); }
.rounded-full { border-radius: var(--radius-full); }

// Espaciado (margin/padding)
.p-xs { padding: var(--space-xs); }
.p-sm { padding: var(--space-sm); }
.p-md { padding: var(--space-md); }
.p-lg { padding: var(--space-lg); }
.p-xl { padding: var(--space-xl); }

.m-xs { margin: var(--space-xs); }
.m-sm { margin: var(--space-sm); }
.m-md { margin: var(--space-md); }
.m-lg { margin: var(--space-lg); }
.m-xl { margin: var(--space-xl); }

.gap-xs { gap: var(--space-xs); }
.gap-sm { gap: var(--space-sm); }
.gap-md { gap: var(--space-md); }
.gap-lg { gap: var(--space-lg); }

// Colores de texto
.text-primary { color: var(--ion-color-primary); }
.text-secondary { color: var(--ion-color-secondary); }
.text-muted { color: var(--ion-color-medium); }
.text-success { color: var(--ion-color-success); }
.text-warning { color: var(--ion-color-warning); }
.text-danger { color: var(--ion-color-danger); }

// Flex utilities
.flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

.flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.flex-col {
  display: flex;
  flex-direction: column;
}

// Animaciones suaves
.animate-fade-in {
  animation: fadeIn var(--transition-normal) ease-out;
}

.animate-slide-up {
  animation: slideUp var(--transition-normal) ease-out;
}

.animate-scale-in {
  animation: scaleIn var(--transition-fast) ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/**
 * Barcode Scanner Styles
 * -----------------------------------------------------
 * Estilos necesarios para hacer el WebView transparente
 * cuando el escáner de códigos de barras está activo.
 * La cámara se renderiza detrás del WebView.
 */
body.barcode-scanner-active,
body.barcode-scanner-active ion-app,
body.barcode-scanner-active ion-content,
body.barcode-scanner-active ion-router-outlet,
body.barcode-scanner-active .ion-page {
  --background: transparent !important;
  --ion-background-color: transparent !important;
  background: transparent !important;
}
// =============================================================================
// DATA AUTHORIZATION MODAL STYLES
// =============================================================================

.authorization-modal {
  --height: 90vh;
  --border-radius: 16px;

  ion-content {
    --padding-bottom: 24px;
  }

  ion-header {
    ion-toolbar {
      --padding-top: 12px;
      --padding-bottom: 12px;
    }

    ion-title {
      font-weight: 600;
      font-size: 18px;
    }
  }
}

/* Asegurar que los checkboxes sean accesibles */
.authorization-modal ion-checkbox {
  --size: 24px;

  &:focus-visible {
    outline: 2px solid var(--ion-color-primary);
    outline-offset: 2px;
  }
}